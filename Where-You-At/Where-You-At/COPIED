//LOGIN

@IBOutlet var username: UITextField!
    @IBOutlet var password: UITextField!

    @IBAction func signIn(sender: UIButton) {
        Alamofire.request(.POST, "http://localhost:3000/login",parameters: ["email" : "\(username.text!)", "password" : "\(password.text!)"], encoding: .JSON)
            .responseJSON { response in
                switch response.result {
                case .Success:
                    if let value = response.result.value {
                        let json = JSON(value)
                        print(json["status"])
                        if json["status"] != 200 {
                            let alert = UIAlertView()
                            alert.title = "Invalid Credentials"
                            alert.message = "Sorry, this username and password do not match"
                            alert.addButtonWithTitle("Ok")
                            alert.show()
                        } else {
                            print("true")
                            let id = json["id"].int
                            let defaults = NSUserDefaults.standardUserDefaults()
                            defaults.setObject(id, forKey: "id")
                            self.performSegueWithIdentifier("toGroups", sender: self)
                        }

                    }

                case .Failure(let error):
                    print(error)
                }
        }
    }

//CREATEGROUP

    @IBOutlet var groupname: UITextField!
    @IBOutlet var event: UITextField!


    @IBAction func createGroup(sender: UIButton) {
        let ns = NSUserDefaults.standardUserDefaults()
        let id = ns.objectForKey("id")

        Alamofire.request(.POST, "http://localhost:3000/groups", parameters: ["name": "\(groupname.text!)", "event": "\(event.text!)", "id": "\(id!)"])

    }

//SIGNUP
    @IBOutlet var fullname: UITextField!

    @IBOutlet var username: UITextField!

    @IBOutlet var password: UITextField!


    @IBAction func submit(sender: UIButton) {
        Alamofire.request(.POST, "http://localhost:3000/users", parameters: ["first_name": "\(fullname.text!)", "email": "\(username.text!)", "password": "\(password.text!)"])
    }


//ACCESSING NSUserDefaults

        let ns = NSUserDefaults.standardUserDefaults()
        let id = ns.objectForKey("id")
        print("============\(id!)=================")


//INVITE DOESN'T WORK BUT HERE IS WHAT WE HAVE

    @IBAction func addMember(sender: UIButton) {
        Alamofire.request(.POST, "http://localhost:3000/users", parameters: ["email": "\(email.text!)"])

    }

